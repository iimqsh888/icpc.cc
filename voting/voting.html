<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="CPC Voting System - Vote for OTC revenue distribution">
    <title>CPC Voting System</title>
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="stylesheet" href="voting.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/web3@4.0.0/dist/web3.min.js"></script>
    <script src="wallet-connector.js"></script>
</head>
<body>
    <!-- Wallet Selection Modal -->
    <div id="walletModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <div class="wallet-modal-header">
                <h2><i class="fas fa-wallet"></i> Connect Wallet</h2>
                <button class="wallet-modal-close" id="closeWalletModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="wallet-options">
                <div class="wallet-option" data-wallet="metamask">
                    <div class="wallet-icon">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMjguNSAyLjVsLTkuNSA3IDEuNzUtNC4yNXoiIGZpbGw9IiNlMjc2MWIiLz48cGF0aCBkPSJNMy41IDIuNWw5LjQgNy4wNS0xLjctNC4zeiIgZmlsbD0iI2UyNzYxYiIvPjxwYXRoIGQ9Ik0yNC4yNSAyMi41bC0yLjUgMy44NSA1LjM1IDEuNDcgMS41NC01LjI3eiIgZmlsbD0iI2UyNzYxYiIvPjxwYXRoIGQ9Ik0zLjM2IDIyLjU1bDEuNTQgNS4yNyA1LjM1LTEuNDctMi41LTMuODV6IiBmaWxsPSIjZTI3NjFiIi8+PHBhdGggZD0iTTE0LjUgMTMuNWwtMS41IDIuMjUgNS4zNS4yNS0uMi01Ljc1eiIgZmlsbD0iI2UyNzYxYiIvPjxwYXRoIGQ9Ik0xNy41IDEzLjVsLTMuNjUtMy4yNS0uMiA1Ljc1IDUuMzUtLjI1eiIgZmlsbD0iI2UyNzYxYiIvPjwvc3ZnPg==" 
                             alt="MetaMask">
                    </div>
                    <div class="wallet-info">
                        <h3>MetaMask</h3>
                        <p>Connect using MetaMask wallet</p>
                    </div>
                    <span class="wallet-badge">Popular</span>
                </div>
                
                <div class="wallet-option" data-wallet="binance">
                    <div class="wallet-icon">
                        <svg width="40" height="40" viewBox="0 0 126.61 126.61" xmlns="http://www.w3.org/2000/svg">
                            <g fill="#f3ba2f">
                                <path d="M38.73 53.2l24.59-24.58 24.6 24.6 14.3-14.31L63.32 0 24.43 38.9z"/>
                                <path d="M0 63.31l14.3-14.3 14.31 14.3-14.31 14.3z"/>
                                <path d="M38.73 73.41l24.59 24.59 24.6-24.6 14.31 14.29-38.9 38.91-38.91-38.88z"/>
                                <path d="M98 63.31l14.3-14.3 14.31 14.3-14.31 14.3z"/>
                                <path d="M77.83 63.3L63.32 48.78 52.59 59.51l-1.24 1.23-2.54 2.54 14.51 14.5 14.51-14.47z"/>
                            </g>
                        </svg>
                    </div>
                    <div class="wallet-info">
                        <h3>Binance Wallet</h3>
                        <p>Connect using Binance Chain Wallet</p>
                    </div>
                </div>
                
                <div class="wallet-option" data-wallet="walletconnect">
                    <div class="wallet-icon">
                        <svg width="40" height="40" viewBox="0 0 300 185" xmlns="http://www.w3.org/2000/svg">
                            <path d="M61.44 36.38c47.4-46.36 124.22-46.36 171.62 0l5.7 5.58a5.9 5.9 0 010 8.5l-19.5 19.08a3.1 3.1 0 01-4.3 0l-7.86-7.69c-33.07-32.35-86.7-32.35-119.77 0l-8.42 8.24a3.1 3.1 0 01-4.3 0L55.1 50.97a5.9 5.9 0 010-8.5l6.34-6.09zm212.06 39.46l17.36 16.98a5.9 5.9 0 010 8.5l-78.3 76.58a6.2 6.2 0 01-8.6 0l-55.57-54.35a1.55 1.55 0 00-2.15 0l-55.57 54.35a6.2 6.2 0 01-8.6 0L3.77 101.32a5.9 5.9 0 010-8.5l17.36-16.98a6.2 6.2 0 018.6 0l55.57 54.35a1.55 1.55 0 002.15 0l55.57-54.35a6.2 6.2 0 018.6 0l55.57 54.35a1.55 1.55 0 002.15 0l55.57-54.35a6.2 6.2 0 018.6 0z" fill="#3b99fc"/>
                        </svg>
                    </div>
                    <div class="wallet-info">
                        <h3>WalletConnect</h3>
                        <p>Scan with mobile wallet</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-vote-yea"></i>
                    <span>CPC Voting</span>
                </div>
                <button id="connectWalletBtn" class="btn-connect">
                    <i class="fas fa-wallet"></i>
                    <span>Connect Wallet</span>
                </button>
                <div id="walletInfo" class="wallet-info" style="display: none;">
                    <div class="wallet-address" id="walletAddress"></div>
                    <button id="disconnectBtn" class="btn-disconnect">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Stats Section -->
            <section class="stats-section">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Current Round</div>
                        <div class="stat-value" id="currentRound">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Time Remaining</div>
                        <div class="stat-value" id="timeRemaining">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Candidates</div>
                        <div class="stat-value" id="candidateCount">-</div>
                    </div>
                </div>
                
                <div class="stat-card highlight">
                    <div class="stat-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Prize Pool</div>
                        <div class="stat-value" id="prizePool">-</div>
                    </div>
                </div>
            </section>

            <!-- Current Winner Section -->
            <section class="winner-section">
                <div class="section-card">
                    <div class="section-header">
                        <h2><i class="fas fa-trophy"></i> Current Revenue Holder</h2>
                        <span class="info-badge">Receiving OTC Fees</span>
                    </div>
                    <div class="winner-content">
                        <div class="winner-address" id="currentWinner">
                            <i class="fas fa-spinner fa-spin"></i> Loading...
                        </div>
                        <p class="winner-description">
                            This address is currently receiving 0.2% of all OTC trading fees in real-time
                        </p>
                    </div>
                </div>
            </section>

            <!-- Action Tabs -->
            <div class="action-tabs">
                <button class="tab-btn active" data-tab="leaderboard">
                    <i class="fas fa-chart-bar"></i> Leaderboard
                </button>
                <button class="tab-btn" data-tab="candidate">
                    <i class="fas fa-user-plus"></i> Become Candidate
                </button>
                <button class="tab-btn" data-tab="vote">
                    <i class="fas fa-vote-yea"></i> Vote
                </button>
                <button class="tab-btn" data-tab="claim">
                    <i class="fas fa-gift"></i> Claim
                </button>
            </div>

            <!-- Tab Contents -->
            <div class="tab-contents">
                <!-- Leaderboard Tab -->
                <div class="tab-content active" id="leaderboard-tab">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-chart-bar"></i> Candidate Leaderboard</h2>
                            <button class="btn-refresh" id="refreshLeaderboard">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div id="candidateList" class="candidate-list">
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Loading candidates...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Become Candidate Tab -->
                <div class="tab-content" id="candidate-tab">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-user-plus"></i> Become a Candidate</h2>
                        </div>
                        <div class="form-content">
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <h3>Requirements</h3>
                                    <ul>
                                        <li>Stake <strong>1 CPC</strong> to become a candidate</li>
                                        <li>Stake will be returned after the round ends</li>
                                        <li>Winner receives OTC fees for the next 30 days</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="status-box" id="candidateStatus">
                                <i class="fas fa-spinner fa-spin"></i> Checking status...
                            </div>
                            
                            <button id="becomeCandidateBtn" class="btn-primary btn-large" disabled>
                                <i class="fas fa-user-plus"></i>
                                <span>Become Candidate</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Vote Tab -->
                <div class="tab-content" id="vote-tab">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-vote-yea"></i> Cast Your Vote</h2>
                        </div>
                        <div class="form-content">
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <h3>Voting Rules</h3>
                                    <ul>
                                        <li>Hold at least <strong>1 CPC</strong> to vote</li>
                                        <li>Voting is <strong>free</strong> (only gas fees)</li>
                                        <li>One vote per address per round</li>
                                        <li>Cannot vote for yourself</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="status-box" id="voteStatus">
                                <i class="fas fa-spinner fa-spin"></i> Checking status...
                            </div>
                            
                            <div class="form-group">
                                <label>Candidate Address</label>
                                <input type="text" 
                                       id="voteAddress" 
                                       class="form-input" 
                                       placeholder="0x..."
                                       disabled>
                                <small>Or select from the leaderboard</small>
                            </div>
                            
                            <button id="voteBtn" class="btn-primary btn-large" disabled>
                                <i class="fas fa-vote-yea"></i>
                                <span>Cast Vote</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Claim Tab -->
                <div class="tab-content" id="claim-tab">
                    <div class="section-card">
                        <div class="section-header">
                            <h2><i class="fas fa-gift"></i> Claim Revenue Right</h2>
                        </div>
                        <div class="form-content">
                            <div class="info-box">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <h3>How It Works</h3>
                                    <ul>
                                        <li>Winner must claim revenue right after round ends</li>
                                        <li>First round: Receive accumulated fees</li>
                                        <li>Future rounds: Receive real-time OTC fees for 30 days</li>
                                        <li>New voting round starts immediately</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="status-box" id="claimStatus">
                                <i class="fas fa-spinner fa-spin"></i> Checking status...
                            </div>
                            
                            <button id="claimBtn" class="btn-success btn-large" disabled>
                                <i class="fas fa-gift"></i>
                                <span>Claim Revenue Right</span>
                            </button>
                            
                            <div class="withdraw-section">
                                <h3><i class="fas fa-coins"></i> Withdraw Stakes</h3>
                                <div id="withdrawList" class="withdraw-list">
                                    <div class="loading">
                                        <i class="fas fa-spinner fa-spin"></i> Loading...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="spinner-container">
            <div class="spinner"></div>
            <p id="loadingText">Processing...</p>
        </div>
    </div>

    <script src="voting.js"></script>
</body>
</html>
